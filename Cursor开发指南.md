# Cursorå¼€å‘å½©ç¥¨ç³»ç»ŸæŒ‡å—

## ğŸ“š ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
3. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
4. [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
5. [AIåŠ©æ‰‹ä½¿ç”¨æŠ€å·§](#aiåŠ©æ‰‹ä½¿ç”¨æŠ€å·§)
6. [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
7. [å¸¸è§é—®é¢˜è§£å†³](#å¸¸è§é—®é¢˜è§£å†³)
8. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
9. [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)
10. [é¡¹ç›®æ‰©å±•å»ºè®®](#é¡¹ç›®æ‰©å±•å»ºè®®)

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹
å½©ç¥¨æ•°æ®ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåŒè‰²çƒå’Œå¤§ä¹é€çš„æ•°æ®è·å–ã€å­˜å‚¨ã€æŸ¥è¯¢ã€ç»Ÿè®¡å’Œèµ°åŠ¿åˆ†æã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ… æ•°æ®è·å–ï¼šæ‰‹åŠ¨è·å–ã€æŒ‡å®šæœŸæ•°è·å–ã€æ‰¹é‡è·å–å†å²æ•°æ®
- âœ… æ•°æ®æŸ¥è¯¢ï¼šæŒ‰æœŸå·æœç´¢ã€åˆ†é¡µå±•ç¤º
- âœ… æ•°æ®ç»Ÿè®¡ï¼šå·ç å‡ºç°é¢‘ç‡ç»Ÿè®¡
- âœ… èµ°åŠ¿åˆ†æï¼šä¼ ç»Ÿèµ°åŠ¿è¡¨æ ¼ã€è¿æ¥çº¿å±•ç¤ºã€é—æ¼å€¼æé†’
- âœ… å¼‚æ­¥ä»»åŠ¡ï¼šå¤§æ‰¹é‡æ•°æ®åå°å¤„ç†ï¼Œå®æ—¶è¿›åº¦æ˜¾ç¤º

---

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
- **Go 1.25+** - ç¼–ç¨‹è¯­è¨€
- **Gin** - Webæ¡†æ¶
- **GORM** - ORMæ¡†æ¶
- **SQLite** - æœ¬åœ°æ•°æ®åº“
- **Resty** - HTTPå®¢æˆ·ç«¯åº“

### å‰ç«¯
- **Vue 3** - å‰ç«¯æ¡†æ¶ï¼ˆComposition APIï¼‰
- **Element Plus** - UIç»„ä»¶åº“
- **ECharts** - æ•°æ®å¯è§†åŒ–ï¼ˆç”¨äºé¢‘ç‡ç»Ÿè®¡å›¾è¡¨ï¼‰
- **Vue Router** - è·¯ç”±ç®¡ç†
- **Axios** - HTTPå®¢æˆ·ç«¯
- **Vite** - æ„å»ºå·¥å…·

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
caipiao/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ api/                    # APIè·¯ç”±å’Œæ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ handlers.go        # HTTPå¤„ç†å™¨
â”‚   â”‚   â””â”€â”€ routes.go          # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ config.go          # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ database/              # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ database.go        # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”‚   â””â”€â”€ lottery.db         # SQLiteæ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ shuangseqiu.go    # åŒè‰²çƒæ¨¡å‹
â”‚   â”‚   â””â”€â”€ daletou.go         # å¤§ä¹é€æ¨¡å‹
â”‚   â”œâ”€â”€ services/              # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ lottery_service.go # å½©ç¥¨æœåŠ¡ï¼ˆæ•°æ®è·å–ã€ä¿å­˜ï¼‰
â”‚   â”‚   â”œâ”€â”€ trend_service.go   # èµ°åŠ¿åˆ†ææœåŠ¡
â”‚   â”‚   â””â”€â”€ task_manager.go    # å¼‚æ­¥ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ main.go                # ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ go.mod                 # Goæ¨¡å—é…ç½®
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/               # APIæ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ lottery.js    # å½©ç¥¨API
â”‚   â”‚   â”‚   â””â”€â”€ request.js    # Axioså®ä¾‹
â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ Layout.vue    # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ index.js      # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Shuangseqiu.vue          # åŒè‰²çƒé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ShuangseqiuTrend.vue     # åŒè‰²çƒèµ°åŠ¿å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ Daletou.vue              # å¤§ä¹é€é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ DaletouTrend.vue         # å¤§ä¹é€èµ°åŠ¿å›¾
â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.js         # Viteé…ç½®
â”‚
â””â”€â”€ æ–‡æ¡£/                      # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
    â”œâ”€â”€ éƒ¨ç½²è¯´æ˜.md            # éƒ¨ç½²æŒ‡å—
    â””â”€â”€ å„ç§åŠŸèƒ½æ–‡æ¡£.md
```

---

## ğŸš€ å¼€å‘æµç¨‹

### 1. åˆå§‹é¡¹ç›®æ­å»º

#### ä½¿ç”¨Cursoråˆ›å»ºé¡¹ç›®

```bash
# 1. åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir caipiao
cd caipiao

# 2. åˆå§‹åŒ–åç«¯
mkdir backend
cd backend
go mod init caipiao/backend

# 3. åˆå§‹åŒ–å‰ç«¯
cd ..
mkdir frontend
cd frontend
npm init -y
```

#### åœ¨Cursorä¸­çš„æ“ä½œ

1. **ä½¿ç”¨`@codebase`æˆ–`@workspace`**ï¼š
   - è®©AIäº†è§£é¡¹ç›®ç»“æ„
   - ä½¿ç”¨`@æ–‡ä»¶å`å¼•ç”¨ç‰¹å®šæ–‡ä»¶

2. **ä½¿ç”¨`.cursorrules`æ–‡ä»¶**ï¼š
   ```
   åˆ›å»º .cursorrules æ–‡ä»¶ï¼ŒåŒ…å«é¡¹ç›®è§„èŒƒï¼š
   - ä»£ç é£æ ¼
   - å‘½åè§„èŒƒ
   - æŠ€æœ¯æ ˆè¦æ±‚
   ```

### 2. åŠŸèƒ½å¼€å‘æµç¨‹

#### å…¸å‹å¼€å‘æ­¥éª¤

```
1. éœ€æ±‚åˆ†æ â†’ å‘Šè¯‰AIä½ çš„éœ€æ±‚
2. AIç”Ÿæˆä»£ç  â†’ å®¡æŸ¥å¹¶è°ƒæ•´
3. æµ‹è¯•åŠŸèƒ½ â†’ å‘ç°é—®é¢˜
4. é—®é¢˜åé¦ˆ â†’ AIä¿®å¤
5. è¿­ä»£ä¼˜åŒ– â†’ å®Œå–„åŠŸèƒ½
```

#### å®é™…æ¡ˆä¾‹ï¼šæ·»åŠ èµ°åŠ¿å›¾åŠŸèƒ½

```markdown
# ä¸AIå¯¹è¯ç¤ºä¾‹

ç”¨æˆ·ï¼šè¯·å®ç°å‰ç«¯çš„ä»»åŠ¡
- å¼‚æ­¥ä»»åŠ¡è¿›åº¦æ¡ï¼šæ˜¾ç¤ºæ‰¹é‡è·å–è¿›åº¦
- èµ°åŠ¿å›¾ï¼ˆEChartsï¼‰ï¼šå·ç èµ°åŠ¿å¯è§†åŒ–
- é¢‘ç‡åˆ†æå›¾ï¼šçƒ­é—¨/å†·é—¨å·ç ç»Ÿè®¡
- é—æ¼å€¼æé†’ï¼šé•¿æœŸæœªå‡ºç°å·ç æç¤º

AIï¼šå¥½çš„ï¼Œæˆ‘æ¥å®ç°...
â†’ ç”Ÿæˆä»£ç 
â†’ åˆ›å»ºæ–‡æ¡£
â†’ æä¾›æµ‹è¯•æŒ‡å—

ç”¨æˆ·ï¼šå¯¼èˆªæ çš„å¤§ä¹é€å’ŒåŒè‰²çƒä¸€æ ·æ”¾åœ¨é¡¶éƒ¨navä¸­
â†’ AIä¿®æ”¹ä»£ç 

ç”¨æˆ·ï¼šèµ°åŠ¿å›¾åº”è¯¥æ”¹ä¸ºä¼ ç»Ÿå½©ç¥¨èµ°åŠ¿è¡¨æ ¼æ ·å¼
â†’ AIé‡æ–°è®¾è®¡å¹¶å®ç°
```

### 3. è°ƒè¯•æµç¨‹

#### å‰ç«¯è°ƒè¯•
```bash
# 1. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend
npm run dev

# 2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
# 3. æŸ¥çœ‹Consoleé”™è¯¯
# 4. ä½¿ç”¨Networké¢æ¿æŸ¥çœ‹APIè¯·æ±‚
# 5. ä½¿ç”¨Vue DevToolsï¼ˆæ¨èå®‰è£…ï¼‰
```

#### åç«¯è°ƒè¯•
```bash
# 1. å¯åŠ¨åç«¯æœåŠ¡
cd backend
go run main.go

# 2. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
# 3. ä½¿ç”¨fmt.Println()æˆ–log.Printf()è¾“å‡ºè°ƒè¯•ä¿¡æ¯
# 4. æ£€æŸ¥æ•°æ®åº“
sqlite3 lottery.db
SELECT * FROM shuangseqiu ORDER BY issue DESC LIMIT 10;
```

---

## ğŸ¤– AIåŠ©æ‰‹ä½¿ç”¨æŠ€å·§

### 1. ä½¿ç”¨Composerï¼ˆå¤šæ–‡ä»¶ç¼–è¾‘ï¼‰

**åœºæ™¯**ï¼šéœ€è¦åŒæ—¶ä¿®æ”¹å¤šä¸ªç›¸å…³æ–‡ä»¶

```
ç‚¹å‡» Composer æŒ‰é’®
è¾“å…¥éœ€æ±‚ï¼š
"ä¿®æ”¹åŒè‰²çƒå’Œå¤§ä¹é€çš„èµ°åŠ¿å›¾ï¼Œæ”¹ä¸ºä¼ ç»Ÿå½©ç¥¨èµ°åŠ¿è¡¨æ ¼æ ·å¼ï¼ŒæœŸå·ä»ä¸Šåˆ°ä¸‹ï¼Œå·ç ä»å·¦åˆ°å³ï¼Œç”¨çº¿æ¡è¿æ¥ç›¸åŒå·ç "
```

**ä¼˜åŠ¿**ï¼š
- ä¸€æ¬¡ç¼–è¾‘å¤šä¸ªæ–‡ä»¶
- AIä¼šç†è§£æ–‡ä»¶é—´çš„å…³è”
- ä¿æŒä»£ç ä¸€è‡´æ€§

### 2. ä½¿ç”¨ä»£ç å¼•ç”¨

**åœºæ™¯**ï¼šå¼•ç”¨ç°æœ‰ä»£ç æˆ–è¯¢é—®é—®é¢˜

```
@lottery_service.go è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•è·å–æ•°æ®çš„ï¼Ÿ
@Shuangseqiu.vue å¦‚ä½•ä¼˜åŒ–è¿™ä¸ªè¡¨æ ¼å¸ƒå±€ï¼Ÿ
```

**ä¼˜åŠ¿**ï¼š
- ç²¾ç¡®å®šä½ä»£ç 
- AIç†è§£ä¸Šä¸‹æ–‡
- å¿«é€Ÿè§£å†³é—®é¢˜

### 3. ä½¿ç”¨è§„åˆ™æ–‡ä»¶

åˆ›å»º `.cursorrules` æ–‡ä»¶ï¼š

```
# é¡¹ç›®è§„åˆ™

## ä»£ç é£æ ¼
- ä½¿ç”¨Goæ ‡å‡†å‘½åè§„èŒƒ
- Vueç»„ä»¶ä½¿ç”¨Composition API
- ä»£ç å¿…é¡»åŒ…å«æ³¨é‡Š

## æŠ€æœ¯æ ˆ
- åç«¯ï¼šGo 1.25+, Gin, GORM, SQLite
- å‰ç«¯ï¼šVue 3, Element Plus, ECharts

## æ³¨æ„äº‹é¡¹
- æ‰€æœ‰APIè¯·æ±‚å¿…é¡»åŒ…å«User-Agent
- æ•°æ®åº“å­—æ®µä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼ˆsnake_caseï¼‰
- å‰ç«¯ç»„ä»¶å¿…é¡»æ”¯æŒå“åº”å¼å¸ƒå±€
```

### 4. æé—®æŠ€å·§

#### âœ… å¥½çš„æé—®æ–¹å¼

```
1. å…·ä½“æ˜ç¡®ï¼š
   "è¯·ä¿®æ”¹åŒè‰²çƒå¼€å¥–è®°å½•è¡¨æ ¼ï¼Œå°†å›ºå®šå®½åº¦æ”¹ä¸ºmin-widthï¼Œè®©è¡¨æ ¼è‡ªé€‚åº”å±å¹•å®½åº¦"

2. æä¾›ä¸Šä¸‹æ–‡ï¼š
   "æˆ‘åœ¨åŒè‰²çƒèµ°åŠ¿å›¾é¡µé¢ï¼Œå¼€å¥–æ—¥æœŸæ²¡æœ‰æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥åç«¯APIæ˜¯å¦è¿”å›äº†æ—¥æœŸå­—æ®µ"

3. æä¾›é”™è¯¯ä¿¡æ¯ï¼š
   "[GIN] 500 | POST "/api/daletou/fetch?issue="
   åç«¯æ—¥å¿—æ˜¾ç¤ºï¼šjson: cannot unmarshal array into Go struct field..."
```

#### âŒ ä¸å¥½çš„æé—®æ–¹å¼

```
1. å¤ªç¬¼ç»Ÿï¼š
   "ä»£ç æœ‰é—®é¢˜" â† æ²¡æœ‰å…·ä½“ä¿¡æ¯

2. ç¼ºå°‘ä¸Šä¸‹æ–‡ï¼š
   "å¸®æˆ‘æ”¹ä¸€ä¸‹" â† ä¸æ¸…æ¥šæ”¹ä»€ä¹ˆ

3. ä¸æä¾›é”™è¯¯ï¼š
   "åŠŸèƒ½ä¸å·¥ä½œ" â† ä¸çŸ¥é“å“ªé‡Œå‡ºé”™
```

### 5. è¿­ä»£ä¼˜åŒ–

**æµç¨‹**ï¼š
```
ç¬¬ä¸€è½®ï¼šå®ç°åŸºç¡€åŠŸèƒ½
ç”¨æˆ·ï¼šè¯·æ·»åŠ æ‰¹é‡è·å–å†å²æ•°æ®åŠŸèƒ½

ç¬¬äºŒè½®ï¼šå®Œå–„åŠŸèƒ½
ç”¨æˆ·ï¼šæ·»åŠ å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œæ˜¾ç¤ºè¿›åº¦æ¡

ç¬¬ä¸‰è½®ï¼šä¼˜åŒ–ä½“éªŒ
ç”¨æˆ·ï¼šç•Œé¢ä¼˜åŒ–ï¼Œè¡¨æ ¼è‡ªé€‚åº”ï¼Œå¯¼èˆªæ ä¼˜åŒ–

ç¬¬å››è½®ï¼šä¿®å¤é—®é¢˜
ç”¨æˆ·ï¼šå¼€å¥–æ—¥æœŸæ²¡æ˜¾ç¤ºï¼Œæ•°æ®æ’åºä¸æ­£ç¡®
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å¤–éƒ¨APIè°ƒç”¨

#### é—®é¢˜ï¼šå®¹æ˜“è¢«æ‹¦æˆªï¼ˆ429é”™è¯¯ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
```go
// ä½¿ç”¨Restyå¹¶è®¾ç½®å®Œæ•´è¯·æ±‚å¤´
client := resty.New().
    SetTimeout(30 * time.Second).
    SetRetryCount(3).
    SetRetryWaitTime(1 * time.Second).
    SetHeaders(map[string]string{
        "User-Agent":      "Mozilla/5.0...",
        "Referer":         "https://www.example.com",
        "Origin":          "https://www.example.com",
        "Accept":          "application/json",
        "Accept-Language": "zh-CN,zh;q=0.9",
        // æ›´å¤šæµè§ˆå™¨å¤´...
    })
```

**æ³¨æ„äº‹é¡¹**ï¼š
- âœ… å¿…é¡»è®¾ç½®User-Agent
- âœ… è®¾ç½®Refererå’ŒOrigin
- âœ… æ·»åŠ Chromeç‰¹æœ‰çš„sec-ch-uaå¤´
- âœ… æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼ˆé¿å…è¿‡å¿«ï¼‰

### 2. æ•°æ®è§£æ

#### é—®é¢˜ï¼šAPIè¿”å›æ ¼å¼ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**ï¼š
```go
// 1. ä½¿ç”¨interface{}å¤„ç†å¤šç§æ ¼å¼
type ApiResponse struct {
    MatchList interface{} `json:"matchList"`
}

// 2. ç±»å‹åˆ¤æ–­
switch v := resp.MatchList.(type) {
case []interface{}:
    // æ•°ç»„æ ¼å¼
case string:
    // å­—ç¬¦ä¸²æ ¼å¼
}

// 3. å®¹é”™å¤„ç†
if len(items) == 0 {
    return errors.New("æ•°æ®ä¸ºç©º")
}
```

### 3. æ—¥æœŸè§£æ

#### é—®é¢˜ï¼šæ—¥æœŸæ ¼å¼ä¸ç»Ÿä¸€

**è§£å†³æ–¹æ¡ˆ**ï¼š
```go
// å¤šç§æ ¼å¼å°è¯•
dateFormats := []string{
    "2006-01-02 15:04:05",
    "2006-01-02",
    "20060102",
}

for _, format := range dateFormats {
    if date, err := time.Parse(format, dateStr); err == nil {
        return date, nil
    }
}

// æ¸…ç†å¤šä½™å­—ç¬¦
dateStr = regexp.MustCompile(`\([^)]+\)`).ReplaceAllString(dateStr, "")
```

### 4. æ•°æ®åº“è®¾è®¡

#### æ³¨æ„äº‹é¡¹

```go
// 1. å­—æ®µå‘½åï¼šä½¿ç”¨é©¼å³°ï¼ˆGoï¼‰ï¼Œæ˜ å°„åˆ°ä¸‹åˆ’çº¿ï¼ˆæ•°æ®åº“ï¼‰
type Shuangseqiu struct {
    RedBall1 int `gorm:"column:red_ball1"`  // Go: RedBall1, DB: red_ball1
}

// 2. ç´¢å¼•ï¼šæœŸå·åº”è¯¥å»ºç«‹å”¯ä¸€ç´¢å¼•
db.AutoMigrate(&models.Shuangseqiu{})
db.Model(&models.Shuangseqiu{}).
    CreateIndex("idx_issue", "issue")

// 3. å»é‡ï¼šä¿å­˜å‰æ£€æŸ¥
var existing models.Shuangseqiu
if err := db.Where("issue = ?", issue).First(&existing).Error; err == nil {
    return errors.New("æ•°æ®å·²å­˜åœ¨")
}
```

### 5. å‰ç«¯çŠ¶æ€ç®¡ç†

#### æ³¨æ„äº‹é¡¹

```javascript
// 1. å“åº”å¼æ•°æ®ä½¿ç”¨ref/reactive
const tableData = ref([])  // ç®€å•ç±»å‹
const pagination = reactive({ page: 1, page_size: 20 })  // å¯¹è±¡

// 2. è®¡ç®—å±æ€§ç¼“å­˜
const filteredData = computed(() => {
  return tableData.value.filter(item => item.issue.includes(search.value))
})

// 3. é¿å…åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä¿®æ”¹çŠ¶æ€
// âŒ é”™è¯¯ï¼šç›´æ¥åœ¨v-forä¸­ä¿®æ”¹
// âœ… æ­£ç¡®ï¼šä½¿ç”¨æ–¹æ³•æˆ–è®¡ç®—å±æ€§
```

### 6. å¼‚æ­¥ä»»åŠ¡å¤„ç†

#### æ³¨æ„äº‹é¡¹

```javascript
// 1. æ¸…ç†å®šæ—¶å™¨
const pollInterval = setInterval(...)
// ç»„ä»¶é”€æ¯æ—¶å¿…é¡»æ¸…ç†
onUnmounted(() => {
  clearInterval(pollInterval)
})

// 2. é”™è¯¯å¤„ç†
try {
  const result = await api.fetchHistory()
} catch (error) {
  // åŒºåˆ†é”™è¯¯ç±»å‹
  if (error.response?.status === 429) {
    ElMessage.error('è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•')
  }
}

// 3. è¶…æ—¶å¤„ç†
let pollCount = 0
const maxPolls = 300  // æœ€å¤š5åˆ†é’Ÿ
if (pollCount >= maxPolls) {
  clearInterval(pollInterval)
  ElMessage.warning('ä»»åŠ¡æ‰§è¡Œè¶…æ—¶')
}
```

---

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. åç«¯ï¼šHTTP 429 é”™è¯¯

**ç—‡çŠ¶**ï¼š
```
2025/10/29 11:13:08 å¤§ä¹é€APIè¿”å›é”™è¯¯çŠ¶æ€ç : 429
å“åº”å†…å®¹: <!DOCTYPE html>...Protected by Tencent Cloud EdgeOne...
```

**è§£å†³**ï¼š
```go
// 1. æ·»åŠ å®Œæ•´è¯·æ±‚å¤´ï¼ˆè§æ³¨æ„äº‹é¡¹1ï¼‰
// 2. é™ä½è¯·æ±‚é¢‘ç‡
time.Sleep(500 * time.Millisecond)
// 3. å¢åŠ é‡è¯•ç­‰å¾…æ—¶é—´
SetRetryWaitTime(2 * time.Second)
```

### 2. åç«¯ï¼šJSONè§£æé”™è¯¯

**ç—‡çŠ¶**ï¼š
```
json: cannot unmarshal array into Go struct field...of type string
```

**è§£å†³**ï¼š
```go
// ä½¿ç”¨interface{}æˆ–[]interface{}
type ApiResponse struct {
    MatchList interface{} `json:"matchList"`
}

// è¿è¡Œæ—¶åˆ¤æ–­ç±»å‹
switch v := resp.MatchList.(type) {
case []interface{}:
    // å¤„ç†æ•°ç»„
case string:
    // å¤„ç†å­—ç¬¦ä¸²
}
```

### 3. åç«¯ï¼šæ—¥æœŸè§£æå¤±è´¥

**ç—‡çŠ¶**ï¼š
```
æœŸå· 2024096: è§£ææ—¥æœŸå¤±è´¥: 2024-08-20(äºŒ)
```

**è§£å†³**ï¼š
```go
// 1. æ¸…ç†å¤šä½™å­—ç¬¦
dateStr = strings.ReplaceAll(dateStr, "(äºŒ)", "")
// æˆ–ä½¿ç”¨æ­£åˆ™
dateStr = regexp.MustCompile(`\([^)]+\)`).ReplaceAllString(dateStr, "")

// 2. å°è¯•å¤šç§æ ¼å¼
dateFormats := []string{"2006-01-02 15:04:05", "2006-01-02", "20060102"}
```

### 4. å‰ç«¯ï¼šè¡¨æ ¼ç©ºç™½

**ç—‡çŠ¶**ï¼šè¡¨æ ¼åˆ—å®½åº¦å›ºå®šï¼Œå®½å±å³ä¾§å¤§é‡ç©ºç™½

**è§£å†³**ï¼š
```vue
<!-- å°†widthæ”¹ä¸ºmin-width -->
<el-table-column label="çº¢çƒ" min-width="420">
```

### 5. å‰ç«¯ï¼šèµ°åŠ¿å›¾ä¸æ˜¾ç¤º

**ç—‡çŠ¶**ï¼šEChartså›¾è¡¨ç©ºç™½

**è§£å†³**ï¼š
```bash
# 1. æ£€æŸ¥æ˜¯å¦å®‰è£…äº†ECharts
npm install echarts

# 2. æ£€æŸ¥DOMå…ƒç´ æ˜¯å¦å­˜åœ¨
const chart = echarts.init(chartRef.value)
// chartRef.value å¿…é¡»ä¸ä¸ºnull

# 3. æ£€æŸ¥æ•°æ®æ ¼å¼
console.log(option)  // éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®
```

### 6. å‰ç«¯ï¼šå¼‚æ­¥ä»»åŠ¡ä¸€ç›´pending

**ç—‡çŠ¶**ï¼šæ‰¹é‡è·å–ä»»åŠ¡ä¸€ç›´æ˜¾ç¤º"å¤„ç†ä¸­"

**è§£å†³**ï¼š
```javascript
// 1. æ£€æŸ¥åç«¯ä»»åŠ¡çŠ¶æ€
// æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤ä»»åŠ¡æ˜¯å¦å®Œæˆ

// 2. æ·»åŠ è¶…æ—¶å¤„ç†
if (pollCount >= maxPolls) {
  clearInterval(pollInterval)
  ElMessage.warning('ä»»åŠ¡æ‰§è¡Œè¶…æ—¶')
}

// 3. æ£€æŸ¥è½®è¯¢é€»è¾‘
// ç¡®ä¿æ­£ç¡®è§£ætask.status
```

### 7. æ•°æ®åº“ï¼šé‡å¤æ•°æ®

**ç—‡çŠ¶**ï¼šæ‰¹é‡è·å–æ—¶å‡ºç°é‡å¤æ•°æ®

**è§£å†³**ï¼š
```go
// ä¿å­˜å‰æ£€æŸ¥
var existing models.Shuangseqiu
if err := db.Where("issue = ?", issue).First(&existing).Error; err == nil {
    return errors.New("æ•°æ®å·²å­˜åœ¨")
}
db.Create(&newRecord)
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡

#### åç«¯
```
services/
  â”œâ”€â”€ lottery_service.go   # ä¸šåŠ¡é€»è¾‘
  â”œâ”€â”€ trend_service.go     # æ•°æ®åˆ†æ
  â””â”€â”€ task_manager.go      # ä»»åŠ¡ç®¡ç†

api/
  â”œâ”€â”€ handlers.go          # HTTPå¤„ç†
  â””â”€â”€ routes.go            # è·¯ç”±å®šä¹‰
```

**åŸåˆ™**ï¼š
- âœ… å•ä¸€èŒè´£ï¼šæ¯ä¸ªæœåŠ¡è´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- âœ… åˆ†ç¦»å…³æ³¨ç‚¹ï¼šHandleråªå¤„ç†HTTPï¼Œä¸šåŠ¡é€»è¾‘åœ¨Service
- âœ… æ˜“äºæµ‹è¯•ï¼šå‡½æ•°çŸ­å°ï¼Œå‚æ•°æ˜ç¡®

#### å‰ç«¯
```
views/
  â”œâ”€â”€ Shuangseqiu.vue      # é¡µé¢ç»„ä»¶
  â””â”€â”€ ShuangseqiuTrend.vue # èµ°åŠ¿å›¾ç»„ä»¶

components/
  â””â”€â”€ Layout.vue           # å¯å¤ç”¨ç»„ä»¶
```

**åŸåˆ™**ï¼š
- âœ… ç»„ä»¶æ‹†åˆ†ï¼šæ¯ä¸ªç»„ä»¶åŠŸèƒ½å•ä¸€
- âœ… çŠ¶æ€æå‡ï¼šå…±äº«çŠ¶æ€æ”¾åœ¨çˆ¶ç»„ä»¶
- âœ… å“åº”å¼è®¾è®¡ï¼šä½¿ç”¨min-widthè€Œä¸æ˜¯width

### 2. é”™è¯¯å¤„ç†

```go
// âœ… å¥½çš„åšæ³•
func FetchData() error {
    resp, err := httpClient.R().Get(url)
    if err != nil {
        return fmt.Errorf("è¯·æ±‚å¤±è´¥: %w", err)
    }
    
    if resp.StatusCode() != 200 {
        return fmt.Errorf("APIè¿”å›é”™è¯¯: %d, %s", 
            resp.StatusCode(), string(resp.Body()))
    }
    
    // è§£ææ•°æ®
    var data ApiResponse
    if err := json.Unmarshal(resp.Body(), &data); err != nil {
        return fmt.Errorf("è§£æå¤±è´¥: %w", err)
    }
    
    return nil
}
```

```javascript
// âœ… å¥½çš„åšæ³•
try {
  const result = await api.fetchData()
  ElMessage.success('è·å–æˆåŠŸ')
} catch (error) {
  console.error('è·å–å¤±è´¥:', error)
  ElMessage.error(error.response?.data?.message || 'æ“ä½œå¤±è´¥')
} finally {
  loading.value = false
}
```

### 3. æ—¥å¿—è®°å½•

```go
// âœ… è®°å½•å…³é”®æ“ä½œ
log.Printf("å¼€å§‹æ‰¹é‡è·å–åŒè‰²çƒå†å²æ•°æ®ï¼Œå…± %d æœŸ", count)
log.Printf("æ­£åœ¨è·å–ç¬¬ %d/%d é¡µ...", page, totalPages)
log.Printf("åŒè‰²çƒæ‰¹é‡è·å–å®Œæˆ: æ€»è®¡=%d, æˆåŠŸ=%d, è·³è¿‡=%d, å¤±è´¥=%d",
    result.Total, result.Success, result.Skipped, result.Failed)

// âœ… è®°å½•é”™è¯¯è¯¦æƒ…
log.Printf("æœŸå· %s: è§£ææ—¥æœŸå¤±è´¥: %s", issue, dateStr)
```

### 4. APIè®¾è®¡

```go
// âœ… RESTfulè®¾è®¡
GET  /api/shuangseqiu/list          // è·å–åˆ—è¡¨
POST /api/shuangseqiu/fetch         // è·å–å•æœŸ
POST /api/shuangseqiu/fetch-history // æ‰¹é‡è·å–
GET  /api/shuangseqiu/statistics    // ç»Ÿè®¡æ•°æ®
GET  /api/shuangseqiu/trend         // èµ°åŠ¿æ•°æ®

// âœ… ç»Ÿä¸€å“åº”æ ¼å¼
type ApiResponse struct {
    Code    int         `json:"code"`
    Message string      `json:"message"`
    Data    interface{} `json:"data"`
}
```

### 5. å‰ç«¯æ€§èƒ½ä¼˜åŒ–

```javascript
// âœ… ä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜
const filteredData = computed(() => {
  return tableData.value.filter(item => 
    item.issue.includes(searchIssue.value)
  )
})

// âœ… é˜²æŠ–æœç´¢
import { debounce } from 'lodash-es'
const handleSearch = debounce(() => {
  loadData()
}, 300)

// âœ… æ‡’åŠ è½½
const ShuangseqiuTrend = () => import('@/views/ShuangseqiuTrend.vue')
```

---

## ğŸ”§ è°ƒè¯•æŠ€å·§

### 1. åç«¯è°ƒè¯•

#### ä½¿ç”¨æ—¥å¿—
```go
// è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
log.Printf("APIè¯·æ±‚: %s %s", method, url)
log.Printf("è¯·æ±‚å‚æ•°: %+v", params)
log.Printf("APIå“åº”: Success=%v, ErrorCode=%s, Message=%s",
    resp.Success, resp.ErrorCode, resp.Message)
log.Printf("è§£ææ•°æ®: æœŸå·=%s, çº¢çƒ=%v, è“çƒ=%d",
    record.Issue, redBalls, record.BlueBall)
```

#### æ•°æ®åº“è°ƒè¯•
```bash
# ä½¿ç”¨sqlite3å‘½ä»¤è¡Œå·¥å…·
sqlite3 backend/lottery.db

# æŸ¥çœ‹è¡¨ç»“æ„
.schema shuangseqiu

# æŸ¥è¯¢æ•°æ®
SELECT * FROM shuangseqiu ORDER BY issue DESC LIMIT 10;

# ç»Ÿè®¡æ•°æ®
SELECT COUNT(*) as total FROM shuangseqiu;
SELECT issue, draw_date FROM shuangseqiu ORDER BY issue DESC;
```

### 2. å‰ç«¯è°ƒè¯•

#### æµè§ˆå™¨æ§åˆ¶å°
```javascript
// 1. æŸ¥çœ‹æ•°æ®
console.log('tableData:', tableData.value)
console.log('trendData:', trendData.value)

// 2. æŸ¥çœ‹APIå“åº”
const result = await api.getList()
console.log('APIå“åº”:', result)

// 3. æ€§èƒ½åˆ†æ
console.time('loadData')
await loadData()
console.timeEnd('loadData')
```

#### Vue DevTools
- å®‰è£…Vue DevToolsæµè§ˆå™¨æ‰©å±•
- æŸ¥çœ‹ç»„ä»¶çŠ¶æ€
- æ£€æŸ¥å“åº”å¼æ•°æ®å˜åŒ–
- æ€§èƒ½åˆ†æ

### 3. ç½‘ç»œè°ƒè¯•

#### æŸ¥çœ‹APIè¯·æ±‚
```
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ¢åˆ°Networkæ ‡ç­¾
3. åˆ·æ–°é¡µé¢æˆ–æ‰§è¡Œæ“ä½œ
4. æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…ï¼š
   - Request Headers
   - Request Payload
   - Response Headers
   - Response Body
```

#### æµ‹è¯•API
```bash
# ä½¿ç”¨curlæµ‹è¯•
curl -X POST "http://localhost:8080/api/shuangseqiu/fetch?issue=" \
  -H "Content-Type: application/json"

# ä½¿ç”¨Postmanæˆ–Apifox
# å¯¼å…¥APIæ–‡æ¡£ï¼Œæµ‹è¯•å„ä¸ªæ¥å£
```

---

## ğŸš€ é¡¹ç›®æ‰©å±•å»ºè®®

### 1. åŠŸèƒ½æ‰©å±•

#### æ•°æ®åˆ†æ
- [ ] å·ç ç»„åˆåˆ†æ
- [ ] å†·çƒ­å·ç é¢„æµ‹
- [ ] è¿å·ã€è·¨åº¦åˆ†æ
- [ ] å¥‡å¶æ¯”ã€å¤§å°æ¯”ç»Ÿè®¡

#### ç”¨æˆ·ä½“éªŒ
- [ ] å¯¼å‡ºExcelåŠŸèƒ½
- [ ] æ‰“å°èµ°åŠ¿å›¾
- [ ] æš—é»‘æ¨¡å¼
- [ ] ç§»åŠ¨ç«¯é€‚é…

#### æ•°æ®ç®¡ç†
- [ ] æ•°æ®å¤‡ä»½/æ¢å¤
- [ ] æ•°æ®å¯¼å…¥/å¯¼å‡º
- [ ] æ•°æ®æ¸…ç†å·¥å…·
- [ ] å¤šæ•°æ®åº“æ”¯æŒï¼ˆMySQL/PostgreSQLï¼‰

### 2. æŠ€æœ¯ä¼˜åŒ–

#### æ€§èƒ½ä¼˜åŒ–
- [ ] åç«¯ï¼šæ·»åŠ Redisç¼“å­˜
- [ ] å‰ç«¯ï¼šè™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®é‡è¡¨æ ¼ï¼‰
- [ ] å‰ç«¯ï¼šWeb Workerå¤„ç†å¤æ‚è®¡ç®—
- [ ] æ•°æ®åº“ï¼šæ·»åŠ ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢

#### ä»£ç è´¨é‡
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ E2Eæµ‹è¯•
- [ ] ä»£ç æ ¼å¼åŒ–ï¼ˆgofmt, prettierï¼‰
- [ ] ä»£ç æ£€æŸ¥ï¼ˆgolangci-lint, ESLintï¼‰

#### éƒ¨ç½²ä¼˜åŒ–
- [ ] Dockerå®¹å™¨åŒ–
- [ ] CI/CDè‡ªåŠ¨åŒ–éƒ¨ç½²
- [ ] ç›‘æ§å’Œæ—¥å¿—æ”¶é›†
- [ ] æ€§èƒ½ç›‘æ§ï¼ˆAPMï¼‰

### 3. å®‰å…¨å¢å¼º

- [ ] APIè®¤è¯ï¼ˆJWTï¼‰
- [ ] è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼ˆRate Limitingï¼‰
- [ ] SQLæ³¨å…¥é˜²æŠ¤ï¼ˆä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- [ ] XSSé˜²æŠ¤ï¼ˆå‰ç«¯è¾“å…¥éªŒè¯ï¼‰

---

## ğŸ“š å­¦ä¹ èµ„æº

### Goè¯­è¨€
- [Goå®˜æ–¹æ–‡æ¡£](https://go.dev/doc/)
- [Ginæ¡†æ¶æ–‡æ¡£](https://gin-gonic.com/docs/)
- [GORMæ–‡æ¡£](https://gorm.io/docs/)

### Vue 3
- [Vue 3å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [Element Plusæ–‡æ¡£](https://element-plus.org/)
- [EChartsæ–‡æ¡£](https://echarts.apache.org/)

### Cursor AI
- [Cursorå®˜æ–¹æ–‡æ¡£](https://docs.cursor.sh/)
- [Cursorå¿«æ·é”®](https://docs.cursor.sh/shortcuts)
- [Cursor Composerä½¿ç”¨](https://docs.cursor.sh/composer)

---

## ğŸ¯ æ€»ç»“

### å¼€å‘æµç¨‹å›é¡¾

```
1. éœ€æ±‚åˆ†æ
   â†“
2. AIç”Ÿæˆä»£ç æ¡†æ¶
   â†“
3. é€æ­¥å®Œå–„åŠŸèƒ½
   â†“
4. æµ‹è¯•å’Œè°ƒè¯•
   â†“
5. é—®é¢˜åé¦ˆå’Œä¿®å¤
   â†“
6. ä¼˜åŒ–å’Œæ‰©å±•
```

### å…³é”®æˆåŠŸå› ç´ 

1. âœ… **æ¸…æ™°çš„æ²Ÿé€š**ï¼šæ˜ç¡®å‘Šè¯‰AIä½ çš„éœ€æ±‚
2. âœ… **è¿­ä»£å¼€å‘**ï¼šä¸è¦ä¸€æ¬¡å®ç°æ‰€æœ‰åŠŸèƒ½
3. âœ… **æµ‹è¯•éªŒè¯**ï¼šæ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½å°±æµ‹è¯•
4. âœ… **é—®é¢˜è¿½è¸ª**ï¼šè®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
5. âœ… **ä»£ç å®¡æŸ¥**ï¼šå®¡æŸ¥AIç”Ÿæˆçš„ä»£ç ï¼Œç¡®ä¿è´¨é‡

### ä½¿ç”¨AIåŠ©æ‰‹çš„å»ºè®®

1. **å……åˆ†åˆ©ç”¨ä¸Šä¸‹æ–‡**ï¼š
   - ä½¿ç”¨`@æ–‡ä»¶å`å¼•ç”¨ä»£ç 
   - æä¾›é”™è¯¯æ—¥å¿—å’Œæˆªå›¾
   - æè¿°é—®é¢˜çš„å¤ç°æ­¥éª¤

2. **è¿­ä»£ä¼˜åŒ–**ï¼š
   - å…ˆå®ç°åŸºç¡€åŠŸèƒ½
   - å†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
   - æœ€åå®Œå–„ç»†èŠ‚

3. **ä¿æŒè€å¿ƒ**ï¼š
   - AIå¯èƒ½éœ€è¦å¤šæ¬¡è°ƒæ•´
   - æä¾›è¯¦ç»†çš„åé¦ˆ
   - ä¸è¦ä¸€æ¬¡æ€§æå¤ªå¤šéœ€æ±‚

4. **å­¦ä¹ AIç”Ÿæˆçš„ä»£ç **ï¼š
   - ç†è§£ä»£ç é€»è¾‘
   - å­¦ä¹ æœ€ä½³å®è·µ
   - ç§¯ç´¯å¼€å‘ç»éªŒ

---

## ğŸ“ æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜è§£å†³"ç« èŠ‚
2. æŸ¥çœ‹é¡¹ç›®ä¸­çš„å…¶ä»–æ–‡æ¡£ï¼ˆREADME.mdã€éƒ¨ç½²è¯´æ˜.mdç­‰ï¼‰
3. ä½¿ç”¨Cursorçš„AIåŠ©æ‰‹æé—®
4. æŸ¥çœ‹ä»£ç æ³¨é‡Šå’Œæ—¥å¿—

---

**ç¥å¼€å‘é¡ºåˆ©ï¼ğŸ‰**

