# 快速开始指南

## 🚀 5分钟快速启动

### 第一步：准备环境

确保已安装以下软件：

- ✅ **Go 1.25+** （后端需要）
- ✅ **Node.js 16+** （前端需要）

验证安装：
```bash
go version
node -v
npm -v
```

### 第二步：启动后端服务

打开一个终端窗口：

```bash
cd /Users/ahyk/data/ai/caipiao
./start-backend.sh
```

等待看到：
```
服务器启动在 http://localhost:8080
```

### 第三步：启动前端服务

打开另一个终端窗口：

```bash
cd /Users/ahyk/data/ai/caipiao
./start-frontend.sh
```

等待看到：
```
➜  Local:   http://localhost:5173/
```

### 第四步：访问应用

在浏览器中打开：
```
http://localhost:5173
```

---

## 📖 功能使用说明

### 1. 查看双色球数据

- 点击顶部导航「双色球」
- 查看开奖记录列表
- 红球显示为红色，蓝球显示为蓝色

### 2. 搜索功能

- 在搜索框输入期号（如：2024）
- 点击「搜索」按钮
- 支持模糊匹配

### 3. 获取最新数据

**方式一：获取最新一期**
- 点击「获取最新数据」按钮
- 系统自动从外部API获取并保存

**方式二：指定期数获取**
- 点击「指定期数获取」按钮
- 输入期号（如：2024001）
- 点击确定

### 4. 数据统计

- 点击「数据统计」按钮
- 切换「红球统计」或「蓝球统计」标签
- 查看每个号码出现的次数
- 进度条显示相对频率

### 5. 分页设置

- 底部可以选择每页显示条数（10/20/50/100）
- 支持快速跳转到指定页码

### 6. 大乐透功能

- 点击顶部导航「大乐透」
- 功能与双色球类似
- 前区显示为红色，后区显示为蓝色

---

## ⚙️ API配置说明

### ✅ 已对接官方API，开箱即用！

系统已经配置好官方彩票数据API，无需额外配置：

- **双色球API**: 中国福利彩票官方接口
  - `https://www.cwl.gov.cn/cwl_admin/front/cwlkj/search/kjxx/findDrawNotice`
  
- **大乐透API**: 中国体育彩票官方接口
  - `https://webapi.sporttery.cn/gateway/lottery/getHistoryPageListV1.qry`

这些是真实的官方API，可以直接获取最新的开奖数据！

### API配置位置

如需查看或修改API配置，位置在 `backend/config/config.go`：

```go
API: APIConfig{
    // 双色球官方API（已配置）
    ShuangseqiuURL: "https://www.cwl.gov.cn/cwl_admin/front/cwlkj/search/kjxx/findDrawNotice",
    // 大乐透官方API（已配置）
    DaletouURL: "https://webapi.sporttery.cn/gateway/lottery/getHistoryPageListV1.qry",
}
```

**注意：** 这些API是公开的官方接口，直接使用即可，无需额外的认证或配置。

---

## 🔧 常见问题解决

### 问题1：后端启动失败

**错误：`command not found: go`**

解决：安装Go语言环境
```bash
# macOS
brew install go

# 验证
go version
```

**错误：`端口8080已被占用`**

解决：更换端口或关闭占用进程
```bash
# 查找占用进程
lsof -i :8080

# 杀死进程
kill -9 <PID>
```

### 问题2：前端启动失败

**错误：`command not found: npm`**

解决：安装Node.js
```bash
# macOS
brew install node

# 验证
node -v
npm -v
```

**错误：`依赖安装失败`**

解决：清理缓存重新安装
```bash
cd frontend
rm -rf node_modules
rm package-lock.json
npm install
```

### 问题3：获取数据失败

**错误提示：`获取数据失败`**

可能原因：
1. 网络连接问题
2. 官方API暂时不可用
3. 防火墙或代理设置阻止访问

解决步骤：
1. 检查网络连接是否正常
2. 在浏览器中直接访问API测试：
   - 双色球：`https://www.cwl.gov.cn/cwl_admin/front/cwlkj/search/kjxx/findDrawNotice?name=ssq&issueCount=1`
   - 大乐透：`https://webapi.sporttery.cn/gateway/lottery/getHistoryPageListV1.qry?gameNo=85&provinceId=0&pageSize=1&isVerify=1&pageNo=1`
3. 查看后端终端的详细错误日志
4. 如果是网络问题，检查防火墙或代理设置

### 问题4：页面显示空白

解决：
1. 确保后端服务已启动（http://localhost:8080）
2. 清除浏览器缓存
3. 打开浏览器开发者工具查看错误
4. 检查前端代理配置

---

## 📊 数据库位置

SQLite数据库文件位置：
```
backend/data/lottery.db
```

如需清空数据库，删除此文件即可，重启后端会自动创建新数据库。

---

## 🛠️ 开发调试

### 查看后端日志

后端终端会实时显示：
- HTTP请求日志
- SQL执行日志
- 错误信息

### 查看前端日志

浏览器按 `F12` 打开开发者工具：
- Console：查看JavaScript错误
- Network：查看API请求
- Sources：调试代码

### API测试

使用curl测试API：

```bash
# 测试获取双色球列表
curl "http://localhost:8080/api/shuangseqiu/list?page=1&page_size=10"

# 测试获取统计数据
curl "http://localhost:8080/api/shuangseqiu/statistics?type=red"
```

---

## 📚 更多文档

- **README.md** - 项目完整说明
- **backend/API说明.md** - 详细的API文档
- **部署说明.md** - 生产环境部署指南

---

## 💡 使用技巧

### 技巧1：快速查看最近开奖

- 默认按开奖日期倒序排列
- 第一页就是最新的开奖记录

### 技巧2：批量获取历史数据

- 使用「指定期数获取」功能
- 循环获取历史期号的数据
- 可以编写脚本批量导入

### 技巧3：数据统计分析

- 统计功能显示每个号码的出现频率
- 结果按出现次数降序排列
- 可用于分析热门号码和冷门号码

### 技巧4：导出数据

数据存储在SQLite数据库中，可以使用任何SQLite工具导出：
```bash
# 安装sqlite3
brew install sqlite3

# 导出为CSV
sqlite3 backend/data/lottery.db
.mode csv
.output shuangseqiu.csv
SELECT * FROM shuangseqiu ORDER BY draw_date DESC;
.quit
```

---

## 🎯 下一步

1. ✅ 熟悉基本功能
2. ⚙️ 配置外部API
3. 📥 获取历史数据
4. 📊 查看统计分析
5. 🚀 部署到生产环境

祝您使用愉快！ 🎉

