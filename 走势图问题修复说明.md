# èµ°åŠ¿å›¾é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ› ä¿®å¤çš„é—®é¢˜

### é—®é¢˜1ï¼šèµ°åŠ¿å›¾çš„å¼€å¥–æ—¥æœŸæ²¡æœ‰å±•ç¤º
**åŸå› **ï¼šåç«¯APIè¿”å›çš„æ•°æ®ç»“æ„ä¸­ç¼ºå°‘å¼€å¥–æ—¥æœŸå­—æ®µ

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
1. åœ¨åç«¯æ•°æ®ç»“æ„ä¸­æ·»åŠ  `DrawDates` å­—æ®µ
2. åœ¨æ•°æ®å¤„ç†æ—¶æå–æ¯æœŸçš„å¼€å¥–æ—¥æœŸ

### é—®é¢˜2ï¼šèµ°åŠ¿å›¾æ’åºé—®é¢˜ï¼ˆæœ€æ–°æœŸåº”è¯¥åœ¨ä¸Šæ–¹ï¼‰
**åŸå› **ï¼šåç«¯è·å–æ•°æ®åè¿›è¡Œäº†åè½¬ï¼Œå¯¼è‡´æ•°æ®å˜æˆå‡åºï¼ˆæœ€æ—§åœ¨ä¸Šï¼‰

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
1. ç§»é™¤æ•°æ®åè½¬é€»è¾‘
2. ä¿æŒæ•°æ®åº“æŸ¥è¯¢çš„å€’åºç»“æœï¼ˆæœ€æ–°åœ¨ä¸Šï¼‰

---

## ğŸ“ ä¿®æ”¹æ–‡ä»¶

### åç«¯æ–‡ä»¶
- `backend/services/trend_service.go`

### ä¿®æ”¹å†…å®¹

#### 1. åŒè‰²çƒèµ°åŠ¿æ•°æ®ç»“æ„

**ä¿®æ”¹å‰**ï¼š
```go
type ShuangseqiuTrendData struct {
	Issues      []string                `json:"issues"`
	RedBalls    [][]int                 `json:"red_balls"`
	BlueBalls   []int                   `json:"blue_balls"`
	// ... å…¶ä»–å­—æ®µ
}
```

**ä¿®æ”¹å**ï¼š
```go
type ShuangseqiuTrendData struct {
	Issues      []string                `json:"issues"`
	DrawDates   []string                `json:"draw_dates"`   // æ–°å¢ï¼šå¼€å¥–æ—¥æœŸ
	RedBalls    [][]int                 `json:"red_balls"`
	BlueBalls   []int                   `json:"blue_balls"`
	// ... å…¶ä»–å­—æ®µ
}
```

#### 2. å¤§ä¹é€èµ°åŠ¿æ•°æ®ç»“æ„

**ä¿®æ”¹å‰**ï¼š
```go
type DaletouTrendData struct {
	Issues       []string             `json:"issues"`
	FrontBalls   [][]int              `json:"front_balls"`
	BackBalls    [][]int              `json:"back_balls"`
	// ... å…¶ä»–å­—æ®µ
}
```

**ä¿®æ”¹å**ï¼š
```go
type DaletouTrendData struct {
	Issues       []string             `json:"issues"`
	DrawDates    []string             `json:"draw_dates"`    // æ–°å¢ï¼šå¼€å¥–æ—¥æœŸ
	FrontBalls   [][]int              `json:"front_balls"`
	BackBalls    [][]int              `json:"back_balls"`
	// ... å…¶ä»–å­—æ®µ
}
```

#### 3. åŒè‰²çƒæ•°æ®å¤„ç†é€»è¾‘

**ä¿®æ”¹å‰**ï¼š
```go
// è·å–æœ€è¿‘NæœŸæ•°æ®ï¼ŒæŒ‰æœŸå·å€’åº
err := db.Order("issue DESC").Limit(limit).Find(&records).Error

// åè½¬æ•°ç»„ï¼Œä½¿å…¶æŒ‰æœŸå·å‡åº
for i, j := 0, len(records)-1; i < j; i, j = i+1, j-1 {
	records[i], records[j] = records[j], records[i]
}

// å¤„ç†æ•°æ®æ—¶æ²¡æœ‰æ·»åŠ å¼€å¥–æ—¥æœŸ
for _, record := range records {
	trend.Issues = append(trend.Issues, record.Issue)
	// æ²¡æœ‰æ·»åŠ  DrawDate
}
```

**ä¿®æ”¹å**ï¼š
```go
// è·å–æœ€è¿‘NæœŸæ•°æ®ï¼ŒæŒ‰æœŸå·å€’åºï¼ˆæœ€æ–°åœ¨ä¸Šï¼‰
err := db.Order("issue DESC").Limit(limit).Find(&records).Error
// ç§»é™¤äº†åè½¬é€»è¾‘ï¼Œä¿æŒå€’åº

// å¤„ç†æ•°æ®æ—¶æ·»åŠ å¼€å¥–æ—¥æœŸ
for _, record := range records {
	trend.Issues = append(trend.Issues, record.Issue)
	trend.DrawDates = append(trend.DrawDates, record.DrawDate.Format("2006-01-02"))
	// ... å…¶ä»–å¤„ç†
}
```

#### 4. å¤§ä¹é€æ•°æ®å¤„ç†é€»è¾‘

**ä¿®æ”¹å†…å®¹**ï¼šä¸åŒè‰²çƒç›¸åŒ
- ç§»é™¤æ•°ç»„åè½¬é€»è¾‘
- æ·»åŠ å¼€å¥–æ—¥æœŸå­—æ®µ

---

## ğŸ¯ ä¿®å¤æ•ˆæœ

### 1. å¼€å¥–æ—¥æœŸæ˜¾ç¤º

**ä¿®å¤å‰**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœŸå· â”‚å¼€å¥–æ—¥æœŸâ”‚ çº¢çƒåŒº è“çƒåŒº â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚2024100â”‚        â”‚ â— â— â—  â—     â”‚  â† æ—¥æœŸä¸ºç©º
â”‚2024099â”‚        â”‚ â— â— â—  â—     â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¿®å¤å**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æœŸå· â”‚å¼€å¥–æ—¥æœŸâ”‚ çº¢çƒåŒº è“çƒåŒº â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚2024100â”‚10-29   â”‚ â— â— â—  â—     â”‚  â† æ˜¾ç¤ºæ—¥æœŸ
â”‚2024099â”‚10-27   â”‚ â— â— â—  â—     â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ•°æ®æ’åº

**ä¿®å¤å‰**ï¼ˆå‡åºï¼Œæœ€æ—§åœ¨ä¸Šï¼‰ï¼š
```
æœŸå·é¡ºåºï¼š
2024051 (æœ€æ—§) â† è¡¨æ ¼é¡¶éƒ¨
2024052
...
2024099
2024100 (æœ€æ–°) â† è¡¨æ ¼åº•éƒ¨ï¼Œéœ€è¦æ»šåŠ¨æ‰èƒ½çœ‹åˆ°
```

**ä¿®å¤å**ï¼ˆå€’åºï¼Œæœ€æ–°åœ¨ä¸Šï¼‰ï¼š
```
æœŸå·é¡ºåºï¼š
2024100 (æœ€æ–°) â† è¡¨æ ¼é¡¶éƒ¨ï¼Œæ‰“å¼€é¡µé¢ç«‹å³å¯è§
2024099
...
2024052
2024051 (æœ€æ—§) â† è¡¨æ ¼åº•éƒ¨
```

---

## ğŸ” APIå“åº”æ ¼å¼

### ä¿®å¤å‰
```json
{
  "issues": ["2024051", "2024052", "...", "2024100"],
  "red_balls": [[...], [...], ...],
  "blue_balls": [5, 10, ...],
  // ç¼ºå°‘ draw_dates å­—æ®µ
}
```

### ä¿®å¤å
```json
{
  "issues": ["2024100", "2024099", "...", "2024051"],
  "draw_dates": ["2024-10-29", "2024-10-27", "...", "2024-06-01"],
  "red_balls": [[...], [...], ...],
  "blue_balls": [5, 10, ...],
  // æ•°æ®å€’åºï¼Œæœ€æ–°åœ¨å‰
}
```

---

## âœ… æµ‹è¯•æ­¥éª¤

### 1. é‡å¯åç«¯æœåŠ¡

```bash
cd /Users/ahyk/data/ai/caipiao/backend
go run main.go
```

### 2. åˆ·æ–°å‰ç«¯é¡µé¢

```bash
# å‰ç«¯ä¸éœ€è¦é‡å¯ï¼Œç›´æ¥åˆ·æ–°æµè§ˆå™¨å³å¯
# æˆ–è€…é‡å¯ï¼š
cd /Users/ahyk/data/ai/caipiao/frontend
npm run dev
```

### 3. æµ‹è¯•èµ°åŠ¿å›¾

1. è®¿é—®"åŒè‰²çƒ" â†’ "èµ°åŠ¿å›¾"
2. æ£€æŸ¥ï¼š
   - âœ… å¼€å¥–æ—¥æœŸåˆ—æ˜¾ç¤ºæ­£ç¡®ï¼ˆæ ¼å¼ï¼š10-29ï¼‰
   - âœ… æœ€æ–°ä¸€æœŸåœ¨è¡¨æ ¼é¡¶éƒ¨
   - âœ… æœŸå·ä»ä¸Šåˆ°ä¸‹é€’å‡ï¼ˆ2024100 â†’ 2024099 â†’ ...ï¼‰

3. è®¿é—®"å¤§ä¹é€" â†’ "èµ°åŠ¿å›¾"
4. æ£€æŸ¥ï¼š
   - âœ… å¼€å¥–æ—¥æœŸåˆ—æ˜¾ç¤ºæ­£ç¡®
   - âœ… æœ€æ–°ä¸€æœŸåœ¨è¡¨æ ¼é¡¶éƒ¨
   - âœ… æœŸå·ä»ä¸Šåˆ°ä¸‹é€’å‡ï¼ˆ25122 â†’ 25121 â†’ ...ï¼‰

---

## ğŸ“Š æ•°æ®æµç¨‹

### åç«¯å¤„ç†æµç¨‹

```
1. æ•°æ®åº“æŸ¥è¯¢
   â†“
   SELECT * FROM shuangseqiu 
   ORDER BY issue DESC  â† å€’åºæŸ¥è¯¢
   LIMIT 50
   â†“
2. ç»“æœé›†ï¼ˆå·²å€’åºï¼Œæœ€æ–°åœ¨å‰ï¼‰
   [2024100, 2024099, ..., 2024051]
   â†“
3. æ•°æ®å¤„ç†ï¼ˆä¸å†åè½¬ï¼‰
   Issues:    [2024100, 2024099, ..., 2024051]
   DrawDates: [2024-10-29, 2024-10-27, ..., 2024-06-01]
   â†“
4. è¿”å›JSON
```

### å‰ç«¯å¤„ç†æµç¨‹

```
1. æ¥æ”¶APIå“åº”
   {
     issues: ["2024100", "2024099", ...],
     draw_dates: ["2024-10-29", "2024-10-27", ...]
   }
   â†“
2. å¤„ç†ä¸ºè¡¨æ ¼æ•°æ®
   tableData = [
     { issue: "2024100", draw_date: "2024-10-29", ... },
     { issue: "2024099", draw_date: "2024-10-27", ... },
     ...
   ]
   â†“
3. æ¸²æŸ“è¡¨æ ¼ï¼ˆv-foréå†ï¼‰
   ç¬¬1è¡Œï¼š2024100  10-29  â† æœ€æ–°
   ç¬¬2è¡Œï¼š2024099  10-27
   ...
   ç¬¬50è¡Œï¼š2024051  06-01  â† æœ€æ—§
```

---

## ğŸ¨ æ—¥æœŸæ ¼å¼

### åç«¯æ ¼å¼åŒ–
```go
record.DrawDate.Format("2006-01-02")
// è¾“å‡ºï¼š2024-10-29
```

### å‰ç«¯æ ¼å¼åŒ–
```javascript
const formatDate = (dateStr) => {
  if (!dateStr) return ''
  const date = new Date(dateStr)
  return `${date.getMonth() + 1}-${date.getDate()}`
}
// è¾“å…¥ï¼š2024-10-29
// è¾“å‡ºï¼š10-29
```

---

## ğŸ‰ ä¿®å¤å®Œæˆ

ä¸¤ä¸ªé—®é¢˜å·²å…¨éƒ¨ä¿®å¤ï¼š

âœ… **é—®é¢˜1å·²ä¿®å¤**ï¼šå¼€å¥–æ—¥æœŸæ­£å¸¸æ˜¾ç¤º
- åç«¯æ·»åŠ äº† `DrawDates` å­—æ®µ
- å‰ç«¯æ­£ç¡®æ˜¾ç¤ºæ—¥æœŸï¼ˆæ ¼å¼ï¼š10-29ï¼‰

âœ… **é—®é¢˜2å·²ä¿®å¤**ï¼šæ•°æ®å€’åºæ’åˆ—ï¼ˆæœ€æ–°åœ¨ä¸Šï¼‰
- ç§»é™¤äº†æ•°æ®åè½¬é€»è¾‘
- æœ€æ–°ä¸€æœŸæ˜¾ç¤ºåœ¨è¡¨æ ¼é¡¶éƒ¨
- æ‰“å¼€é¡µé¢å³å¯çœ‹åˆ°æœ€æ–°æ•°æ®ï¼Œæ— éœ€æ»šåŠ¨

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- `èµ°åŠ¿å›¾ä¼˜åŒ–è¯´æ˜.md` - èµ°åŠ¿å›¾å®Œæ•´åŠŸèƒ½è¯´æ˜
- `backend/services/trend_service.go` - åç«¯å®ç°ä»£ç 
- `frontend/src/views/ShuangseqiuTrend.vue` - å‰ç«¯åŒè‰²çƒèµ°åŠ¿å›¾
- `frontend/src/views/DaletouTrend.vue` - å‰ç«¯å¤§ä¹é€èµ°åŠ¿å›¾

